# 1. JVM

Java虚拟机（JVM，Java Virtual Machine）

## 1.1 职责

本质是一个程序，职责如下

1. **加载字节码**：JVM加载编译后的Java字节码文件（.class文件），并将其解释或编译为机器码以供执行。
2. **执行代码**：JVM解释执行字节码或使用即时编译器（JIT）将字节码编译为本地机器码执行。

## 1.2 功能

1. **内存管理**：JVM负责管理程序运行时所需的内存，包括堆内存和栈内存的分配和回收。
2. **垃圾回收**：JVM自动进行垃圾回收，回收不再使用的对象，避免内存泄漏。
3. **即时编译**：对热点代码进行优化， 提升执行效率。

**即时编译（Just-In-Time)**：

>  用于将程序源代码或中间代码（如Java字节码）在运行时即时编译成机器码

原理：

1. **热点代码识别**：JIT编译器会监视程序的执行情况，识别出频繁执行的热点代码段，即被频繁调用的方法或循环体。
2. **即时编译**：一旦识别出热点代码，JIT编译器会将其编译成本地机器码，存储在代码缓存中，以备后续调用。
3. **本地机器码执行**：一旦热点代码被编译成本地机器码，后续执行时就<u>不再需要解释执行字节码</u>，而是直接执行编译后的本地机器码，从而提高了程序的执行效率。

![image-20240605215332730](https://raw.githubusercontent.com/betteryuxuan/Image/main/image-20240605215332730.png)

## 

